{% extends 'Borrower/borrowerBase.html' %}

{% block title %}Profile & Settings - Avendro{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto text-gray-600 px-4 sm:px-6 lg:px-8 py-6">
    <h2 class="text-xl font-bold text-gray-900 mb-6">Profile & Settings</h2>

    <!-- 1. Profile Settings -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Profile Information</h3>
        <form method="post">
            {% csrf_token %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                    <input type="text" name="first_name" value="{{ borrower.first_name }}" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                    <input type="text" name="last_name" value="{{ borrower.last_name }}" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Mobile Number</label>
                    <input type="text" name="mobile_number" value="{{ borrower.mobile_number }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" value="{{ borrower.user.email }}" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed">
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Current Address</label>
                    <input type="text" name="current_street_address" value="{{ borrower.current_street_address }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg mb-2">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                        <input type="text" name="current_city" value="{{ borrower.current_city }}" placeholder="City" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        <input type="text" name="current_state" value="{{ borrower.current_state }}" placeholder="State" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        <input type="text" name="current_postal_code" value="{{ borrower.current_postal_code }}" placeholder="Postal Code" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                </div>
            </div>
            <div class="mt-6 flex justify-end">
                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition">Save Changes</button>
            </div>
            <p class="text-xs text-gray-400 mt-2">To change your name or email, please contact support.</p>
        </form>
    </div>

    <!-- 2. Change Password -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Change Password</h3>
        <form method="post" action="{% url 'borrower-change-password' %}">
            {% csrf_token %}
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Current Password</label>
                <input type="password" name="old_password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg">
            </div>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">New Password</label>
                <input type="password" name="new_password1" required class="w-full px-3 py-2 border border-gray-300 rounded-lg">
            </div>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Confirm New Password</label>
                <input type="password" name="new_password2" required class="w-full px-3 py-2 border border-gray-300 rounded-lg">
            </div>
            <div class="mt-6 flex justify-end">
                <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition">Update Password</button>
            </div>
        </form>
    </div>

    <!-- 3. Security Questions -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Security Questions</h3>
        <form method="post" action="{% url 'update_security_questions' %}">
            {% csrf_token %}
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Security Question 1</label>
                <input type="text" name="security_question_1" value="{{ borrower.security_question_1|default_if_none:'' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                <input type="text" name="security_answer_1" value="{{ borrower.security_answer_1|default_if_none:'' }}" placeholder="Your Answer" class="w-full px-3 py-2 border border-gray-300 rounded-lg mt-2">
            </div>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Security Question 2</label>
                <input type="text" name="security_question_2" value="{{ borrower.security_question_2|default_if_none:'' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                <input type="text" name="security_answer_2" value="{{ borrower.security_answer_2|default_if_none:'' }}" placeholder="Your Answer" class="w-full px-3 py-2 border border-gray-300 rounded-lg mt-2">
            </div>
            <div class="mt-6 flex justify-end">
                <button type="submit" class="px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition">Save Security Questions</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}